Вводные данные:

В общежитии 10 квартир:
4 однокомнатные;
3 двухкомнатные;
2 трехкомнатные;
1 четырехкомнатная.

Список людей:
Анжелика - Женский - Лесби;
Лена - Женский - Нетолерантный натурал;
Александра - Женский - Лесби;
Данил - Мужской - Гей;
Егор - Мужской - Толерантный натурал;
Антон - Мужской - Нетолерантный натурал;
Андрей - Мужской - Гей;
Анатолич - Мужской - Нетолерантный натурал;
Константин - Мужской - Толерантный натурал;
Оксана - Женский - Толерантный натурал;
Наталья - Женский - Толерантный натурал.

Задача:
На входе список людей с их предпочтениями, а на выходе результат расселения записанный в БД. При первом запуске, люди уже должны быть расселены случайно, как и при дальнейшем нажатии кнопки заселить. Визуал задачи не важен.

Ограничения:
- В одной комнате могут жить люди одного пола;
- Толерантные натуралы могут жить со всеми;
- Нетолерантные натуралы могут жить со всеми натуралами;
- Геи могут жить с геями и толерантными натуралами;
- Лесби могут жить с лесби и толерантными натуралами.
